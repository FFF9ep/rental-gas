<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Rental</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="splash-screen">
        <div class="splash-content">
            <div class="bounce-circle"></div>
            <h2 style="color: white; margin-top: 20px;">Rental Mobil</h2>
            <small style="color: #eee;">Gas Rental</small>
        </div>
    </div>

    <div id="auth-view" class="auth-screen hidden"> <div style="display: flex; align-items: center; margin-bottom: 20px;">
            <img src="logo.png" class="logo-img" alt="Logo">
            <h2 style="color: var(--primary-blue);">Gas Rental</h2>
        </div>
        
        <div id="login-form" class="auth-form">
            <h3>Login</h3>
            <div class="input-group">
                <input type="text" id="login-username" placeholder="Username">
            </div>
            <div class="input-group">
                <input type="password" id="login-password" placeholder="Password">
            </div>
            <button class="btn-block" onclick="handleLogin()">Masuk</button>
            <div class="link-text" onclick="toggleAuth('register')">Belum punya akun? Daftar</div>
            <div class="link-text" onclick="skipToHome()" style="color: #666;">&larr; Kembali ke Home</div>
        </div>

        <div id="register-form" class="auth-form hidden">
            <h3>Register Pelanggan</h3>
            <div class="input-group"><input type="text" id="reg-name" placeholder="Nama Lengkap"></div>
            <div class="input-group"><input type="text" id="reg-address" placeholder="Alamat Lengkap"></div>
            <div class="input-group">
                <select id="reg-gender">
                    <option value="">Pilih Jenis Kelamin</option>
                    <option value="L">Laki-laki</option>
                    <option value="P">Perempuan</option>
                </select>
            </div>
            <div class="input-group">
                <label>Upload Foto KTP (Untuk Profile)</label>
                <input type="file" id="reg-ktp" accept="image/*">
            </div>
            <div class="input-group"><input type="text" id="reg-user" placeholder="Username Baru"></div>
            <div class="input-group"><input type="password" id="reg-pass" placeholder="Password Baru"></div>
            
            <button class="btn-block" onclick="handleRegister()">Daftar</button>
            <div class="link-text" onclick="toggleAuth('login')">Sudah punya akun? Login</div>
        </div>
    </div>

    <div id="app-view" class="app-container hidden">
        
        <div class="desktop-nav">
            <div style="display: flex; align-items: center;">
                <img src="logo.png" class="logo-img" alt="Logo">
                <h2 style="color: var(--primary-blue);">Gas Rental</h2>
            </div>
            <div style="display: flex; gap: 20px; cursor: pointer; align-items: center;">
                <span onclick="navTo('home')">Home</span>
                
                <span class="auth-only hidden" onclick="navTo('history')">History</span>
                <span class="auth-only hidden" onclick="navTo('profile')">Profile</span>
                
                <span id="nav-login-btn" class="guest-only" onclick="openAuth()" style="color: var(--primary-blue); font-weight: bold;">Login</span>
                
                <span id="nav-logout-btn" class="auth-only hidden" onclick="logout()" style="color: red;">Logout</span>
            </div>
        </div>

        <div id="customer-panel">
            
            <div id="section-home">
                <div class="header" style="display: block;">
                    <h3>Hi, <span id="display-name">Guest</span>!</h3>
                    <small style="color: #666;">Mau jalan-jalan kemana hari ini?</small>
                </div>

                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Cari mobil impianmu..." onkeyup="filterCars()">
                </div>

                <div class="section-title"><span>Brands</span></div>
                <div id="brand-scroll-container" class="brands-scroll">
                    </div>

                <div class="section-title">
                    <span>Available Cars</span>
                </div>

                <div class="car-list-container" id="car-list">
                    </div>
            </div>

            <div id="section-detail" class="hidden">
                <div class="header">
                    <i class="fas fa-chevron-left" style="cursor: pointer;" onclick="navTo('home')"></i>
                    <span>Detail Mobil</span>
                    <i class="far fa-heart"></i>
                </div>
                
                <div id="detail-content" class="detail-wrapper"></div> 
            </div>

            <div id="section-payment" class="hidden">
                <div class="header">
                    <i class="fas fa-chevron-left" style="cursor: pointer;" onclick="navTo('detail')"></i>
                    <span>Pilih Pembayaran</span>
                    <div></div>
                </div>
                <div style="padding: 20px;">
                    <h3>Metode Pembayaran</h3>
                    <div id="payment-list"></div>
                    <button class="btn-outline" style="width:100%; margin-top: 10px;" onclick="navTo('add-payment')">+ Tambah Metode Pembayaran</button>
                    
                    <div style="margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px;">
                         <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Total Sewa</span>
                            <span id="payment-total" style="font-weight: bold;">Rp 0</span>
                         </div>
                         <button id="btn-pay-final" class="btn-block" onclick="processOrder()" disabled style="background: #ccc;">Bayar Sekarang</button>
                    </div>
                </div>
            </div>

            <div id="section-add-payment" class="hidden">
                <div class="header">
                    <i class="fas fa-chevron-left" style="cursor: pointer;" onclick="navTo('payment')"></i>
                    <span>Tambah Kartu</span>
                    <div></div>
                </div>
                <div style="padding: 20px;">
                    <div class="input-group"><input type="text" id="card-name" placeholder="Nama Pemilik"></div>
                    <div class="input-group"><input type="text" id="card-number" placeholder="Nomor Kartu"></div>
                    <div class="input-group">
                         <select id="card-type">
                             <option value="Visa">Visa</option>
                             <option value="Mastercard">Mastercard</option>
                         </select>
                    </div>
                    <button class="btn-block" onclick="savePaymentMethod()">Simpan Kartu</button>
                </div>
            </div>

            <div id="section-history" class="hidden">
                <div class="section-title">Riwayat Pesanan</div>
                <div id="history-list" style="padding: 0 20px 80px;"></div>
            </div>

            <div id="section-profile" class="hidden">
                <div class="header"><h3>Profile</h3></div>
                <div style="padding: 20px; text-align: center;">
                    <img id="profile-pic-display" src="" class="profile-avatar">
                    <h3 id="profile-name">User</h3>
                    <p id="profile-address" style="color: #666; margin-bottom: 20px;"></p>
                    <div style="text-align: left; background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <p><strong>Username:</strong> <span id="profile-username"></span></p>
                        <p><strong>Gender:</strong> <span id="profile-gender"></span></p>
                    </div>
                    <button class="btn-block" style="background: var(--danger);" onclick="logout()">Logout</button>
                </div>
            </div>

            <div class="bottom-nav">
                <div class="nav-item active" onclick="navTo('home')"><i class="fas fa-home"></i><span class="nav-label">Home</span></div>
                <div class="nav-item auth-only hidden" onclick="navTo('history')"><i class="fas fa-file-invoice"></i><span class="nav-label">Orders</span></div>
                <div class="nav-item auth-only hidden" onclick="navTo('profile')"><i class="fas fa-user"></i><span class="nav-label">Profile</span></div>
                <div class="nav-item guest-only" onclick="openAuth()"><i class="fas fa-sign-in-alt"></i><span class="nav-label">Login</span></div>
            </div>
        </div>

        <div id="admin-panel" class="hidden">
            <div class="desktop-nav" style="background: #1f2937; color: white;">
                <h2>Admin Panel</h2>
                <span onclick="logout()" style="cursor: pointer; color: #ff6b6b;">Logout</span>
            </div>

            <div class="admin-dashboard">
                <div class="admin-card">
                    <h3 id="form-title">Tambah Mobil Baru</h3>
                    <input type="hidden" id="edit-car-id">
                    
                    <div class="input-group" style="margin-top: 10px;">
                        <input type="text" id="add-car-name" placeholder="Nama Mobil (ex: Pajero)">
                    </div>
                    <div class="input-group">
                        <input type="text" id="add-car-brand" placeholder="Nama Brand (ex: Toyota)">
                    </div>
                    <div class="input-group">
                        <label>Upload Logo Brand</label>
                        <input type="file" id="add-brand-logo" accept="image/*">
                    </div>

                    <div class="input-group">
                        <input type="number" id="add-car-price" placeholder="Harga Sewa (ex: 600000)">
                    </div>
                    <div class="input-group">
                        <input type="text" id="add-car-specs" placeholder="Specs (Pisahkan koma)">
                    </div>
                    <div class="input-group">
                        <label>Upload Gambar Mobil</label>
                        <input type="file" id="add-car-img" accept="image/*">
                    </div>
                    
                    <button class="btn-block" id="btn-save-car" onclick="adminSaveCar()">+ Simpan Mobil</button>
                    <button class="btn-block hidden" id="btn-cancel-edit" onclick="cancelEdit()" style="background: #999; margin-top: 5px;">Batal Edit</button>
                </div>

                <h3>Daftar Mobil</h3>
                <div id="admin-car-list" class="car-list-container"></div>
                
                <h3 style="margin-top: 20px;">Persetujuan Pesanan</h3>
                <div id="admin-order-list"></div>
            </div>
        </div>

        <div id="order-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('order-modal')">&times;</span>
                <h3 style="margin-bottom: 15px;">Detail Pesanan</h3>
                <div id="modal-order-content"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>